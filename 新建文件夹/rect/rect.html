<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>rect</title>
    <link rel="stylesheet" href="css/bootstrap-3.3.7-dist/css/bootstrap.min.css">  
    <link rel="stylesheet" href="css/button.css"/> 
    <link rel="stylesheet" href="css/pretty-checkbox.min.css"/>   
    <link rel="stylesheet" href="css/slider/bootstrap-slider.css">  
    <link rel="stylesheet" href="css/slider/bootstrap-slider.min.css">  
	<script src="js/jquery/jquery-2.1.4.min.js"></script>
    <script src="js/Bootstrap/bootstrap.min.js"></script>
    <script src="js/js/bootstrap-slider.js"></script>
    <script src="js/js/bootstrap-slider.min.js"></script>
</head>
<body>
    <div id="color_date">
        <svg id="color_rects"></svg>
    </div>
</body>
<script src="js/d3.v4.min.js"></script>
<script>
    var clo_width = 800;
    var clo_height = 250;

    $("#color_date").width(clo_width).height(clo_height);
    $("#color_rects").width(clo_width).height(clo_height).css("background-color", "#F6C1FA");

    d3.csv("color_rect.csv",function(clo_rect){


    var rects = []

    for(var i = 0 ; i < clo_rect.length ; i ++){        
        rects[i] = parseInt(clo_rect[i].date)
    }

    //………………………………绘制矩阵图………………………………
    function draw_rects(){
        hour = ["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24"]
        date = ["Mon","Thue","Wed","Thur","Fri","Sat","Sun"]

        var svg_hour=d3.select("#color_rects").append("a").selectAll("text").data(hour).enter()
                .append("text")
                .attr("font-size","10px")
                .attr("font-family","楷体")
                .attr("x",function(d,i){
                    return 56 + i * 31 + 31/3; 
                })
                .attr("y",26 - 32/3)
                .text(function(d){
                    return d;
                })

        var svg_date=d3.select("#color_rects").append("a").selectAll("text").data(date).enter()
                .append("text")
                .attr("font-size","10px")
                .attr("font-family","楷体")
                .attr("x",56 / 4)
                .attr("y",function(d,i){
                    return 26 + i * 32 + 32 - 10;
                })
                .text(function(d){
                    return d;
                })
        //**rgb矩阵颜色控制比例尺
        var r = d3.scale.linear()
                  .domain([0,23])
                  .range([200,255])
        
        var g = d3.scale.linear()
                  .domain([0,23])
                  .range([84,168])

        var b = d3.scale.linear()
                  .domain([0,23])
                  .range([0,83])

        //**矩阵绘制
        var svg_rect = d3.select("#color_rects").append("g").selectAll("rect").data(rects).enter()
                        .append("rect")
                        .attr("width",31 - 1)
                        .attr("height",32 - 1)
                        .attr("x",function(d,i){
                            var line = 24;
                            var start = 56;
                            return i%line*31+start ;
                        })
                        .attr("y",function(d,i){
                            var line = 24;
                            var start = 26;
                            return parseInt(i/line)*32+start  ;
                        })
                        .attr("id",function(d,i){
                            return i;
                        })
                        .style("fill",function(d,i){    
                            return d3.rgb(r(parseInt(i/24))-i*0.1,g(parseInt(i/24))-i*0.5,b(parseInt(i/24))+i*0.5)
                        })
    }
    draw_rects();

    });
</script>
</html>